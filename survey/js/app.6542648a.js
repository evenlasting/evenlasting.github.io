(function(t){function e(e){for(var r,s,i=e[0],c=e[1],l=e[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(r=!1)}r&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},o={app:0},a=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0051":function(t,e,n){"use strict";n("1462")},"034f":function(t,e,n){"use strict";n("85ec")},1462:function(t,e,n){},"265a":function(t,e,n){"use strict";n("a8ed")},2811:function(t,e,n){},3334:function(t,e,n){},"365a":function(t,e,n){"use strict";n("d9a2")},"4d4e":function(t,e,n){"use strict";n("5830")},"559f":function(t,e,n){"use strict";n("94b2")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=n("5c96"),a=n.n(o),s=n("313e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullScreenLoading,expression:"fullScreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app"}},[n("div",{attrs:{id:"tooltip"}}),t.fullScreenLoading?t._e():n("el-card",{staticClass:"box-card",attrs:{shadow:"never",id:"question","body-style":t.bodyCardStyle}},[n("Question")],1),t.fullScreenLoading?t._e():n("el-card",{staticClass:"box-card",attrs:{shadow:"never",id:"graph","body-style":t.bodyCardStyle}},[n("Graph",{attrs:{"slider-value":t.val1}})],1),t.fullScreenLoading?t._e():n("el-card",{staticClass:"box-card",attrs:{shadow:"never",id:"sankey","body-style":t.bodyCardStyle}},[n("Causal")],1),t.fullScreenLoading?t._e():n("el-card",{staticClass:"box-card",attrs:{shadow:"never",id:"matrix","body-style":t.bodyCardStyle}},[n("Matrix")],1),t.fullScreenLoading?t._e():n("el-card",{staticClass:"box-card",attrs:{shadow:"never",id:"arc","body-style":t.bodyCardStyle}},[n("Arc")],1),t._e()],1)},c=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100%"}},[n("CardTitle",{attrs:{name:"Question List"}}),n("div",{attrs:{id:"questionView"}},t._l(t.question,(function(e,r){return n("div",{key:"question"+r,on:{click:function(e){return t.click(r)},mousemove:function(e){return t.move(e,r)},mouseout:t.leave,mouseleave:t.leave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleArr[r],expression:"visibleArr[index]"}],staticClass:"question"},[n("div",{staticClass:"questionText"},[t._v(t._s(e))]),n("br")])])})),0)],1)},u=[],d=(n("99af"),n("cb29"),n("d81d"),n("b64b"),n("5698")),p=(n("4160"),n("c975"),n("fb6a"),n("ac1f"),n("1276"),n("159b"),n("45fc"),n("a434"),n("3835")),h=n("2f62"),f=n("bc3a"),g=n.n(f);r["default"].use(h["a"]);var m=new h["a"].Store({state:{fullScreenLoading:!0,CHIGroup:[],NODE:[],Question:[],selectedGroup:-1,selectedNode:1,url:"http://49.235.219.243:5000",causeUrl:"http://10.172.142.37:5001",groupArr:[],size:20,selectedHyperEdge:[1,2],peopleNumber:0,CHI:[],COR:[],demographicCol:"#edf8b1",coreProblemCol:"#00ff33",normalProblemCol:"#50A5FF",problemColArr:["#edf8b1","#50A5FF","#00ff33"],colorArr:["251,180,174","204,235,197","222,203,228","254,217,166","255,255,204","229,216,189","179,205,227"],questionTypeList:[],questionOption:[],questionOptionNum:[],delNodeList:[],selectedHyperEdgeBack:[],screenCenterQuestionId:1,nodesConnections:[],questionOptionArr:[],questionOptionNumArr:[],causalDATA:{},causalConstraints:{},causalAddNode:[],peopleIndexConstraints:[],CHIBACK:[],nodesConnectionsBACK:[],causalAll:!1},mutations:{updateCausalAll:function(t,e){t.causalAll=e},updatePeopleIndexConstraints:function(t,e){t.peopleIndexConstraints=e},updateCausalConstraints:function(t,e){t.causalConstraints=e},updateCausalAddNode:function(t,e){t.causalAddNode=e},updateCausalDATA:function(t,e){t.causalDATA=e},updateLoading:function(t,e){t.fullScreenLoading=e},UpdateSurvey:function(t,e){var n=e.newCHI,r=e.newCHIGroup,o=e.newNODE,a=e.newQuestion,s=e.newTypeList,i=e.newNodesConnections,c=e.newPeopleNumber,l=e.newOption,u=e.newOptionNum;t.peopleNumber=c,t.CHIGroup=r,t.NODE=o,t.Question=a,t.CHI=n,t.questionTypeList=s,t.groupArr=r.map((function(t){return t.map((function(t){return t[0]}))})),t.nodesConnections=i,t.questionOptionArr=l,t.questionOptionNumArr=u,t.CHIGroupBack=JSON.parse(JSON.stringify(r))},updataCHIGroup:function(t,e){t.CHIGroup=e,t.groupArr=e.map((function(t){return t.map((function(t){return t[0]}))}))},hyperEdgeBack:function(t,e){t.selectedHyperEdgeBack=e},selectNode:function(t,e){t.selectedNode=e},selectGroup:function(t,e){t.selectedGroup=e},selectHyperEdge:function(t,e){var n=Object(p["a"])(e,3);t.selectedHyperEdge=n[0],t.questionOption=n[1],t.questionOptionNum=n[2]},delNode:function(t,e){t.selectedHyperEdgeBack.splice(t.selectedHyperEdgeBack.indexOf(e),1),t.selectedHyperEdge=t.selectedHyperEdgeBack},addNode:function(t,e){t.selectedHyperEdge.push(e)},commitScreenCenterQuestionId:function(t,e){t.screenCenterQuestionId=e},UpdateSurveyBack:function(t,e){var n=e.newCHI,r=e.newNodesConnections,o=e.newPeopleNumber,a=e.newOption,s=e.newOptionNum;t.peopleNumber=o,t.CHIBACK=n,t.nodesConnectionsBACK=r,t.questionOptionArr=a,t.questionOptionNumArr=s}},actions:{dataRequestContraints:function(t,e){var n=t.commit,r=t.state,o=t.dispatch,a=r.url;n("updatePeopleIndexConstraints",e),g.a.post("".concat(a,"/survey"),{question:[],people:e}).then((function(t){o("causalDATARequest").then((function(){n("UpdateSurveyBack",t.data),console.log("finish constraints request")}))})).catch((function(t){console.error(t)}))},causalDATARequest:function(t){var e=t.commit,n=t.state,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{requiredirect:[],forbiddendirect:[]},o=n.url,a=r.requiredirect,s=r.forbiddendirect;console.log({r:a,f:s}),g.a.post("".concat(o,"/cause"),{r:a,f:s}).then((function(t){console.log(t.data,"causalRequest"),e("updateCausalDATA",t.data),e("updateLoading",!1)})).catch((function(t){return console.error(t)}))},selectNodeinGraph:function(t,e){var n=t.commit,r=t.state;n("selectNode",e);for(var o=0;o<r.CHIGroup.length;o+=1)r.CHIGroup[o].some((function(t){return t[0]===e}))&&n("selectGroup",o)},dataRequest:function(t){var e=t.commit,n=t.state,r=t.dispatch,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=n.url;g.a.post("".concat(s,"/survey"),{question:o,people:a}).then((function(t){r("causalDATARequest").then((function(){e("UpdateSurvey",t.data),console.log("finish request")}))})).catch((function(t){console.error(t)}))}}});function v(t){return m.state.NODE.indexOf(t)}function y(t){return m.state.NODE[t]}function C(t){return m.state.Question[y(t)]}function x(t,e){return m.state.CHI[t][e]}function b(t,e){var n=e.map((function(e){return x(t,e)})),r=0;return n.forEach((function(t){r+=t})),r/e.length}function A(t){return m.state.questionOptionArr[t]}function w(t){return m.state.questionOptionNumArr[t]}function E(t,e){return console.log("****",t,e,m.state.questionOptionArr[e],m.state.questionOptionArr[e].indexOf(t)),m.state.questionOptionArr[e].indexOf(t)}function O(t){return"".concat(y(t),":").concat(C(t))}var N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{staticClass:"titleBackground",attrs:{"body-style":"padding-top:0%;padding-left:0%;display: flex;",shadow:"never"}},[n("div",{staticClass:"titleName"},[t._v(t._s(t.name))]),t._t("default")],2)},$=[],k={name:"cardTitle",props:["name"]},L=k,T=(n("559f"),n("2877")),I=Object(T["a"])(L,N,$,!1,null,"7baffee0",null),q=I.exports,S={name:"question",components:{CardTitle:q},data:function(){return{visibleArr:new Array(100).fill(!0),questionType:["categorical","categorical","categorical","numeric","numeric","categorical","categorical","categorical","numeric","numeric","numeric","numeric","numeric","numeric","numeric","numeric","numeric"],mean:[0,0,0,.65,5.6,0,0,0,.41,.54,.63,.55,.39,.56,.6,.39,1.03],var:[0,0,0,.36,8.06,0,0,0,.24,.24,.61,.24,.23,.24,.23,.24,.56]}},mounted:function(){},computed:{question:function(){var t=this,e=Object.keys(this.$store.state.Question);return e.map((function(e){return"".concat(e,":").concat(t.$store.state.Question[e])}))}},methods:{click:function(t){this.$store.dispatch("selectNodeinGraph",v("Q".concat(t))),this.$store.commit("commitScreenCenterQuestionId",v("Q".concat(t)))},move:function(t,e){d["l"]("#tooltip").style("left","".concat(t.clientX+10,"px")).style("top","".concat(t.clientY+10,"px")).style("z-index",20).style("display","inline").text("type:".concat(this.questionType[e],"　 　 mean:").concat(0===this.mean[e]?"null":this.mean[e]," var:").concat(0===this.var[e]?"null":this.var[e]," multiple-choice"))},leave:function(){d["l"]("#tooltip").style("display","none")},delQuestion:function(t){console.log("clickdel"),this.$set(this.visibleArr,t,!1)}}},H=S,_=(n("365a"),Object(T["a"])(H,l,u,!1,null,"0750a742",null)),G=_.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("CardTitle",{attrs:{name:"Hyperedge"}}),n("svg",{attrs:{id:"matrix_svg"}},[n("g",{attrs:{transform:"translate(0,150)"}},[n("g",{attrs:{transform:"translate(50 0)"}},t._l(t.hyperEdge,(function(e,r){return n("HyperEdgeMatrix",{key:"edge"+r,attrs:{"index-col":r,size:t.size,"edge-list":e.indexArr,length:t.length,"edge-question-id":e.question,"edge-num":e.num,"edge-option":e.option,"edge-option-num":e.option_num}})})),1),n("g",[n("QuestionNameMatrix",{attrs:{"group-id":t.groupid}})],1)])])],1)},P=[],M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{attrs:{id:"hyper",transform:"translate("+this.translateX+" 0)"}},t._l(t.renderArr,(function(e,r){return n("rect",{key:"hype"+r+"/"+t.indexCol+"/"+e,attrs:{transform:"translate(0 "+r*t.size+")",width:t.size,height:t.size,fill:e},on:{click:function(e){return t.selectHyperEdge(t.indexCol,r)}}})})),0)},z=[],B={name:"hyper-edge-matrix",props:["left","top","size","edgeList","indexCol","length","edgeQuestionId","edgeNum","edgeOption","edgeOptionNum"],data:function(){return{groupid:this.$store.state.selectedGroup,translateX:this.indexCol*this.size,renderArr:new Array(this.length).fill(0),sizeX:d["k"]().range([.5,1]).domain([this.$store.state.peopleNumber/2,2*this.$store.state.peopleNumber/3]),sizeAns:0,noQuestionCol:d["f"](d["i"](240,240,240),d["i"](200,200,200)),QuestionCol:d["f"]("rgb(204,220,255)","#00A5FF")}},watch:{edgeList:function(t){var e=this;console.log("hyperedge",this.edgeOption,this.edgeOptionNum,this.edgeNum,this.edgeQuestionId),this.groupid=this.$store.state.selectedGroup,this.renderArr=new Array(this.length);for(var n=this.$store.state.CHIGroup,o=0;o<this.renderArr.length;o+=1){var a=n[this.groupid][o][0];this.renderArr[o]=this.noQuestionCol(b(a,this.edgeList))}t.forEach((function(t){r["default"].set(e.renderArr,t,e.QuestionCol(Math.random()))}))}},mounted:function(){var t=this;this.sizeAns=this.sizeX(this.edgeNum),this.renderArr=new Array(this.length);for(var e=this.$store.state.CHIGroup,n=0;n<this.renderArr.length;n+=1){var o=e[this.groupid][n][0];this.renderArr[n]=this.noQuestionCol(b(o,this.edgeList))}this.edgeList.forEach((function(e){r["default"].set(t.renderArr,e,t.QuestionCol(Math.random()))}))},methods:{selectHyperEdge:function(){console.log("edgeOption",this.edgeOption,this.edgeOptionNum),this.$store.commit("selectHyperEdge",[this.edgeQuestionId.map((function(t){return t})),this.edgeOption,this.edgeOptionNum])}}},Q=B,D=(n("265a"),Object(T["a"])(Q,M,z,!1,null,"41ccf680",null)),j=D.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",[t._l(t.nameArr,(function(e,r){return n("text",{key:r,attrs:{transform:"translate(5 "+(r+.9)*t.size+")"},on:{mouseover:function(n){return t.nameOver(r,e)},mouseleave:t.nameLeave,click:function(n){return t.nameClick(e)}}},[t._v(t._s(e))])})),this.tooltip?n("text",{staticClass:"t",attrs:{transform:t.tooltipTransform}},[t._v(t._s(t.tooltipQuestion))]):t._e()],2)},K=[],X={props:["groupId"],data:function(){return{tooltip:!1,tooltipQuestion:"",tooltipTransformY:0}},computed:{tooltipTransform:function(){return"translate(50  ".concat(this.tooltipTransformY,")")},nameArr:function(){if(-1===this.groupId)return[];var t=this.$store.state;return t.groupArr[this.groupId].map((function(e){return t.NODE[e]}))},colorArr:function(){return this.nameArr.map((function(t){v(t);return"#000000"}))},size:function(){return this.$store.state.size}},mounted:function(){},methods:{nameOver:function(t,e){this.tooltipTransformY=t*this.size+20,this.tooltipQuestion=this.$store.state.Question[e],this.tooltip=!0},nameLeave:function(){this.tooltip=!1},nameClick:function(t){this.$store.dispatch("selectNodeinGraph",v(t))}}},Y=X,U=(n("0051"),Object(T["a"])(Y,F,K,!1,null,"6b86f1ad",null)),J=U.exports,V={name:"matrix",data:function(){return{hyperEdge:[],size:20,length:0}},computed:{groupid:function(){return this.$store.state.selectedGroup},questionid:function(){return this.$store.state.selectedNode},peopleNumber:function(){return this.$store.state.peopleNumber}},methods:{initSvg:function(){var t=d["l"]("#matrix_svg").append("svg").attr("width","100%").attr("height","100%"),e=t.append("g").attr("transform","translate(50,0)");function n(t){var n=t.transform;e.attr("transform","translate(".concat(n.x,",").concat(n.y,")scale(").concat(n.k,")"))}t.call(d["n"]().scaleExtent([.1,10]).on("zoom",n)),this.drawGraph=e},drawBarChart:function(){var t=this;d["l"]("#barChart").remove();var e=d["l"]("#matrix_svg").append("g").attr("id","barChart").attr("transform","translate(50,0)");this.hyperEdge.forEach((function(n,r){var o=r*t.size,a=150,s=t.$store.state.peopleNumber/100;t.hyperEdge[r].option_num.forEach((function(n,r){e.append("rect").attr("x",o).attr("y",a-n/s).attr("width",t.size).attr("height",n/s).attr("fill","rgb(".concat(t.$store.state.colorArr[r])),a-=n/s}))}))},updateMatrix:function(t){var e=this,n=t,r=this.$store.state.url;this.length=this.$store.state.groupArr[n].length,g.a.post("".concat(r,"/group"),{question:this.$store.state.groupArr[n],people:this.$store.state.peopleIndexConstraints}).then((function(t){console.log(e.$store.state.groupArr[n],t.data);for(var r=t.data,o=0;o<r.length;o+=1)r[o].indexArr=r[o].question.map((function(t){return e.$store.state.groupArr[n].indexOf(t)}),1);e.hyperEdge=r,e.hyperEdge.sort((function(t,n){return n.question.indexOf(e.$store.state.selectedNode)-t.question.indexOf(e.$store.state.selectedNode)})),e.drawBarChart()})).catch((function(t){console.error(t)}))}},mounted:function(){},components:{HyperEdgeMatrix:j,QuestionNameMatrix:J,CardTitle:q},watch:{groupid:function(t){this.updateMatrix(t)},questionid:function(t){this.hyperEdge.sort((function(e,n){return n.question.indexOf(t)-e.question.indexOf(t)})),this.drawBarChart()},peopleNumber:function(){this.updateMatrix(this.groupid)}}},W=V,Z=(n("771d"),Object(T["a"])(W,R,P,!1,null,"0893dc74",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100%"}},[n("CardTitle",{attrs:{name:"Causal"}},[n("CausalConsstraints")],1),n("svg",{attrs:{id:"causalSvg"}},[n("g",{attrs:{id:"causalGroup"}})])],1)},nt=[],rt=(n("a630"),n("b0c0"),n("a9e3"),n("25eb"),n("b680"),n("d3b7"),n("25f0"),n("6062"),n("3ca3"),n("ddb0"),n("96cf"),n("1da1")),ot=n("2909"),at=n("166a");function st(t,e,n,r){console.log(e,n);var o=[e],a=[0],s=0,i=0,c=new Array(r.nodes.length).fill(!1),l=!1;while(s<=i){for(var u=o[s],d=0;d<r.nodes.length;d+=1)if(0!==t[u][d]&&!c[d]&&(i+=1,o[i]=d,a[i]=s,c[d]=!0,o[i]===n)){l=!0;break}if(l)break;s+=1}if(!l)return{sucess:l,way:[]};var p=[i],h=i,f=[];while(0!==h)h=a[h],p.push(h);var g=p.map((function(t){return f.push(o[t]),o[t]}));f=f.map((function(t){return{name:t}}));for(var m=[],v=0;v<g.length-1;v+=1)1===t[g[v]][g[v+1]]?m.push({target:g[v+1],source:g[v]}):m.push({target:g[v],source:g[v+1]});return{sucess:l,way:m,nodes:f}}function it(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=[],o=[],a=0;a<e.nodes.length;a+=1)r.push(new Array(e.nodes.length).fill(0)),o.push(new Array(e.nodes.length).fill(0));e.links.forEach((function(t){var e=t.source,n=t.target,a=t.score;r[e][n]=1,r[n][e]=-1,o[e][n]=Number(a)}));var s=[],i=n.map((function(t){return Number(t[1])}));t.forEach((function(t){-1===i.indexOf(t)&&s.push(t)})),console.log(t,s,i,"nodeidlist");var c=s.shift(),l=s.map((function(t){return st(r,c,t,e)}));console.log("!!!!!!!!!!!!!!!!",l);var u={way:[],nodes:[]};return n.forEach((function(t){u.nodes.push({name:Number(t[0])}),u.nodes.push({name:Number(t[1])}),u.way.push({source:Number(t[0]),target:Number(t[1]),score:o[t[0]][t[1]]})})),l.forEach((function(t,e){t.sucess&&(u.nodes=[].concat(Object(ot["a"])(u.nodes),Object(ot["a"])(t.nodes)),t.way.forEach((function(t){if(!u.way.some((function(e){return e.source===t.source&&e.target===t.target}))){var e=t.source,n=t.target;u.way.push({source:e,target:n,score:o[e][n]})}})))})),u.nodes=Array.from(new Set(u.nodes.map((function(t){return t.name})))).map((function(t){return{name:t}})),console.log("bfs for All",u),u}function ct(t){var e=t.way,n=t.nodes,r=n.map((function(t){return t.name})),o=new Array(200).fill(!1),a=!0,s=[],i={};while(a){a=!1;for(var c=[],l=[],u=function(t){var n=r[t];e.some((function(t){return t.source===n&&!o[t.target]}))||o[n]||(c.push(n),console.log("thisNode",n),l.push(n),a=!0)},d=0;d<r.length;d+=1)u(d);l.forEach((function(t){o[t]=!0})),s.push(c)}for(var p=function(t){s[t].forEach((function(e){i[e]=t}))},h=0;h<s.length;h+=1)p(h);return{hAns:s,hMap:i}}var lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-popover",{staticStyle:{"padding-left":"0px"},attrs:{trigger:"click"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:10}},on:{blur:t.finishInput},model:{value:t.causalConstraints,callback:function(e){t.causalConstraints=e},expression:"causalConstraints"}}),n("button",{attrs:{slot:"reference",icon:"el-icon-edit"},slot:"reference"},[t._v("Constraints")])],1)},ut=[],dt={name:"causalConstraints",data:function(){return{causalConstraints:""}},methods:{finishInput:function(){var t=this.causalConstraints.split(/\r?\n/);console.log(t);var e=[],n={requiredirect:[],forbiddendirect:[]};t.forEach((function(t){var r=t.split("--\x3e"),o=t.split("!->");console.log(t,"cons"),r.length>1?(n.requiredirect.push([r[0],r[1]]),e.push(Number(r[0])),e.push(Number(r[1]))):o.length>1?(n.forbiddendirect.push([o[0],o[1]]),e.push(Number(o[0])),e.push(Number(o[1]))):""!==t&&e.push(Number(t))})),console.log("constrainsNew",n),this.$store.commit("updateCausalConstraints",n),this.$store.commit("updateCausalAddNode",Array.from(new Set(e)))}}},pt=dt,ht=Object(T["a"])(pt,lt,ut,!1,null,null,null),ft=ht.exports,gt={name:"causal",components:{CardTitle:q,CausalConsstraints:ft},data:function(){return{selectSource:"",selectTarget:"",selectSourceBool:!0,col:this.$store.state.problemColArr,questionTypeList:this.$store.state.questionTypeList,constraint:[],DATAB:this.$store.state.causalDATA,DATAB_BACK:this.$store.state.causalDATA,lineFlag:!1}},mounted:function(){var t=this;this.DATAB=this.$store.state.causalDATA,this.DATAB_BACK=this.$store.state.causalDATA;var e=d["l"]("#causalGroup"),n=d["l"]("#causalSvg");function r(t){var n=t.transform;e.attr("transform","translate(".concat(n.x,",").concat(n.y,")scale(").concat(n.k,")"))}this.inteline=n.append("line").attr("id","causalinteline").attr("stroke","black").style("fill","none").style("stroke-width","3px").attr("marker-end","url(#arrow)").style("display","none"),n.on("mousemove",(function(t){d["l"]("#causalinteline").attr("x2",t.offsetX).attr("y2",t.offsetY-50)})),n.on("contextmenu",(function(e){e.preventDefault(),console.log("right",e),t.lineFlag?(d["l"]("#causalinteline").attr("x1",e.offsetX).attr("y1",e.offsetY-50).style("display","inline"),t.lineFlag=!t.lineFlag):(d["l"]("#causalinteline").style("display","none"),t.lineFlag=!t.lineFlag)})),this.marker=n.append("marker").attr("id","arrow").attr("markerUnits","strokeWidth").attr("viewBox","0 0 12 12").attr("refX",6).attr("refY",6).attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M2,2 L10,6 L2,10 L6,6 L2,2").attr("fill","#000"),this.zoom=d["n"]().scaleExtent([.1,10]).on("zoom",r),n.call(this.zoom)},computed:{hyperEdge:function(){return Array.from(new Set([].concat(Object(ot["a"])(this.$store.state.selectedHyperEdge),Object(ot["a"])(this.$store.state.causalAddNode))))},bfsAns:function(){return console.log("bfsAns change"),console.log(this.hyperEdge,"hyperEdgeNodes"),it(this.hyperEdge,this.$store.state.causalDATA,this.causalConstraints.requiredirect||[])},causeUrl:function(){return this.$store.state.causeUrl},causalConstraints:function(){return this.$store.state.causalConstraints},causalAddNode:function(){return this.$store.state.causalAddNode}},watch:{hyperEdge:function(){this.DATAB_BACK=this.DATAB,this.hyperEdge_BACK=this.hyperEdge},bfsAns:function(t){this.asyncBfsAns(t)},causalConstraints:function(t){console.log("cConstschange"),this.$store.dispatch("causalDATARequest",t)}},methods:{bfsForAllItemThis:function(t){return it(t,this.DATAB)},clickCircle:function(t){var e=this;console.log("click"),this.selectSourceBool?(this.selectSource=t,this.selectSourceBool=!1,console.log("select",t)):(this.selectTarget=t,this.constraint.push(["".concat(this.selectSource),"".concat(this.selectTarget)]),console.log("bfsans",this.bfsAns),g.a.post("".concat(this.causeUrl,"/cause"),{r:this.constraint,node:this.bfsAns.nodes.map((function(t){return t.name}))}).then((function(t){var n=t.data;e.DATAB_BACK=n,e.hyperEdge_BACK=e.bfsAns.nodes.map((function(t){return t.name})),e.DATAB=n,g.a.post("".concat(e.causeUrl,"/restart"))})),this.selectSourceBool=!0)},asyncBfsAns:function(t){var e=this;return Object(rt["a"])(regeneratorRuntime.mark((function n(){var r,o,a,s,i,c,l,u,p,h,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=1,r=t,o=ct(r),a=o.hAns,s=o.hMap,i=[],e.$store.commit("hyperEdgeBack",i),a.forEach((function(t){return t.forEach((function(t){return i.push(t)}))})),c=[],l=new Array(100).fill(0),i.forEach((function(t){l[s[t]]+=1})),u=100,c=i.map((function(t){var e=200*(a[s[t]].indexOf(t)-(l[s[t]]-1)/2);return{x:u+e,y:150*s[t]}})),p={},i.forEach((function(t){p[t]=[]})),r.way.forEach((function(t){var e=t.target,n=t.source;p[e].push(n)})),d["l"]("#causalGroup").selectAll("*").remove(),h=d["l"]("#causalGroup"),e.zoom.translateTo(d["l"]("#causalSvg"),100,100),e.zoom.scaleTo(d["l"]("#causalSvg"),1.5),r.way.forEach((function(t){var e=t.target,n=t.source;e=i.indexOf(e),n=i.indexOf(n);var r=d["g"]();r.moveTo(c[n].x,c[n].y-30);var o=(c[n].y+c[e].y)/2;r.bezierCurveTo(c[n].x,o,c[e].x,o,c[e].x,c[e].y+30),h.append("path").attr("d",r.toString()).attr("stroke","black").style("fill","none").style("stroke-width","".concat(3*t.score,"px")).attr("id","L".concat(n,"V").concat(e)).attr("marker-end","url(#arrow)")})),c.forEach((function(t,n){var r=e,o=O(i[n]),a=at["a"](e.col[e.questionTypeList[i[n]]]);a.opacity=.5,console.log(r,o);var s=JSON.parse(JSON.stringify(e.$store.state.questionOptionNumArr[i[n]])),c=d["h"]()(s);console.log(c);var l=["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],u=d["a"]().innerRadius(0).outerRadius(20);c.forEach((function(r,a){h.append("path").attr("d",u(r)).style("fill",l[8-a]).attr("transform","translate(".concat(t.x,", ").concat(t.y,")")).on("mousemove",(function(t){d["l"]("#tooltip").style("left","".concat(t.clientX+10,"px")).style("top","".concat(t.clientY+10,"px")).style("z-index",20).style("display","inline").text(o)})).on("mouseleave",(function(){d["l"]("#tooltip").style("display","none")})).on("click",(function(){e.$store.dispatch("selectNodeinGraph",i[n])}))})),h.append("text").attr("transform","translate(".concat(t.x-50,", ").concat(t.y+5,")")).text("Q".concat(i[n]))})),f={},n.next=23,Object.keys(p).forEach(function(){var t=Object(rt["a"])(regeneratorRuntime.mark((function t(n){var r,o,a,s,l,u,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=p[n],0===r.length){t.next=8;break}return t.next=4,g.a.post("".concat(e.$store.state.url,"/linear"),{t:Number(n),s:r});case 4:if(o=t.sent,o.data.success){t.next=7;break}return t.abrupt("return");case 7:f[n]={R:o.data.R,coefficient:o.data.coefficient,children:r};case 8:a=-1,s=0,r.forEach((function(t,e){var r=i.indexOf(t),o=i.indexOf(Number.parseInt(n,10));h.insert("text","foreignObject").text(f[n].coefficient[e].toFixed(3)).attr("x",(c[r].x+c[o].x)/2+10).attr("y",(c[r].y+c[o].y)/2),a=f[n].R,s=o})),-1!==a&&(l=O(i[s]),u=c[s],d["l"]("#Q".concat(i[s])).remove(),m=at["a"](e.col[e.questionTypeList[i[s]]]),m.opacity=20*Math.abs(a)+.4,console.log(l),console.log("Rback",a),h.append("path").attr("d",d["a"]()({innerRadius:25,outerRadius:30,startAngle:0,endAngle:2*Math.PI*a})).style("fill","#DBAAAD").attr("transform","translate(".concat(u.x,", ").concat(u.y,")")).on("mousemove",(function(t){d["l"]("#tooltip").style("left","".concat(t.clientX+10,"px")).style("top","".concat(t.clientY+10,"px")).style("z-index",20).style("display","inline").text("fit score: ".concat(a.toFixed(2)))})).on("mouseleave",(function(){d["l"]("#tooltip").style("display","none")})));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 23:case"end":return n.stop()}}),n)})))()}}},mt=gt,vt=(n("4d4e"),Object(T["a"])(mt,et,nt,!1,null,null,null)),yt=vt.exports,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100%"}},[t._m(0),n("div",{staticClass:"sliderLineLine"},[n("el-slider",{attrs:{"format-tooltip":t.formatTooltipLine,step:10},model:{value:t.val0,callback:function(e){t.val0=e},expression:"val0"}})],1),n("div",{staticClass:"sliderLine"},[n("el-slider",{attrs:{"format-tooltip":t.formatTooltip,step:10},model:{value:t.val1,callback:function(e){t.val1=e},expression:"val1"}})],1),n("CardTitle",{attrs:{name:"Hypergraph"}},[n("div",{staticStyle:{flex:"auto"}},[n("input",{attrs:{type:"file",value:"",id:"file"},on:{change:t.uploadData}}),n("el-popover",{staticStyle:{"padding-left":"0px"},attrs:{trigger:"click"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:10}},on:{blur:t.finishInput},model:{value:t.graphConstraints,callback:function(e){t.graphConstraints=e},expression:"graphConstraints"}}),n("button",{attrs:{slot:"reference",icon:"el-icon-edit"},slot:"reference"},[t._v("Constraints")])],1)],1)]),n("div",{attrs:{id:"forceGraph"}})],1)},xt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sliderHint"},[n("p",[t._v(" line "),n("br"),t._v(" support ")])])}],bt={name:"graph",data:function(){return{val0:30,val1:70,links:[],nodes:[],littleRectLength:25,drawGraph:null,matrixList:[],matrixTranslate:[[800,500],[300,200],[1100,-0],[1650,850],[400,700],[1400,1200]],matrixContent:[],graphConstraints:"",lineFlag:!1}},components:{CardTitle:q},computed:{CHIBACK:function(){return this.$store.state.CHIBACK},selectNodeId:function(){return this.$store.state.selectedNode},screenCenterQuestionId:function(){return this.$store.state.screenCenterQuestionId},CHIid2GroupMap:function(){var t=this.$store.state.groupArr,e=new Array(this.$store.state.CHI.length).fill(0);return t.forEach((function(t,n){t.forEach((function(t){e[t]=n}))})),e},CHIArr:function(){for(var t=this,e=[],n=this.$store.state.CHI,r=0;r<n.length;r+=1)for(var o=r+1;o<n.length;o+=1)n[r][o]>.8&&this.CHIid2GroupMap[r]!==this.CHIid2GroupMap[o]&&function(){var n=t.getQuestionPos(r),a=t.getQuestionPos(o),s=void 0,i=void 0,c=999999;n.forEach((function(t,e){a.forEach((function(n,r){c>Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2)&&(s=e,i=r,c=Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}))})),console.log("ansMax",c,5e5*t.val0),c<5e3*t.val0&&e.push([n[s],a[i]])}();return e}},watch:{CHIBACK:function(){this.redraw()},screenCenterQuestionId:function(t){var e=this.getQuestionPos(t)[1];console.log("pos",e),this.zoom.scaleTo(this.svg,1),this.zoom.translateTo(this.svg,e[0],e[1]+50)},selectNodeId:function(t){var e=this.getQuestionPos(t),n=d["l"]("#GraphCircle");n.selectAll("*").remove(),n.append("circle").attr("cx",e[1][0]).attr("cy",e[1][1]+10).attr("fill","black").attr("stroke","black").attr("r",2)},val1:function(){this.redraw()},val0:function(){this.redraw()}},mounted:function(){this.initSvg(),this.dataProcessing(),this.drawForceGraphd3(),this.setMatrixPosition(),this.drawGraph.append("g").attr("id","lineGraph"),this.drawGraph.append("g").attr("id","GraphCircle"),this.drawInitLine()},methods:{formatTooltipLine:function(t){return"threshold of showing line: ".concat((t/100).toFixed(1))},formatTooltip:function(t){return"threshold of support: ".concat((1-t/100).toFixed(1))},finishInput:function(){var t=this.graphConstraints.split(/\r?\n/),e=this.$store.state.groupArr,n=this.$store.state.CHIGroup;t.forEach((function(t){var r,o,a,s=t.split("--\x3e"),i=Number(s[0]),c=Number(s[1]);e.forEach((function(t,n){console.log("group",t,e),-1!==t.indexOf(i)&&(r=n,a=t.indexOf(i)),-1!==t.indexOf(c)&&(o=n)}));var l=n[r].splice(a,1),u=Object(p["a"])(l,1),d=u[0];n[o].push(d),console.log(r,o)})),console.log(n,"CHIGroup",this.$store.state.CHIGroup),this.$store.commit("updataCHIGroup",n),this.redraw()},redraw:function(){this.matrixList=[],this.matrixContent=[],this.initSvg(),this.dataProcessing(),this.drawForceGraphd3(),this.setMatrixPosition(),this.drawGraph.append("g").attr("id","lineGraph"),this.drawGraph.append("g").attr("id","GraphCircle"),this.drawInitLine()},uploadData:function(t){var e=new FormData;e.append("file",t.target.files[0]);var n="".concat(this.$store.state.url,"/datainput");console.log("input",n);var r={headers:{"Content-Type":"multipart/form-data"}};g.a.post(n,e,r).then((function(t){console.log(t)})),this.loading=!0},changeGroup:function(t,e){var n,r,o=v(t),a=this.$store.state.groupArr,s=this.$store.state.CHIGroup;a.forEach((function(t,e){console.log("group",t,a),-1!==t.indexOf(o)&&(n=e,r=t.indexOf(o))}));var i=s[n].splice(r,1);s[e].push(i),a=s.map((function(t){return t.map((function(t){return t[0]}))})),this.initSvg()},drawInitLine:function(){var t=this;d["l"]("#lineGraph").selectAll("*").remove();var e=this.CHIArr;e.forEach((function(e){return t.drawLine(e[0],e[1])}))},getQuestionPos:function(t){for(var e=0,n=0,r=0;r<this.matrixContent.length;r+=1)for(var o=0;o<this.matrixContent[r].length;o+=1)this.matrixContent[r][o][0]===t&&(e=r,n=o);var a=Object(p["a"])(this.matrixTranslate[e],2),s=a[0],i=a[1],c=this.littleRectLength/2,l=n*this.littleRectLength,u=this.matrixContent[e].length*this.littleRectLength,d=[[s-2*c,i+u-l-c],[s+l+c,i+u+2*c],[s+u+3*c,i+l+c],[l+s+c,i-2*c]];return d},drawLine:function(t,e){var n=(t[0]+e[0])/2,r=d["l"]("#lineGraph"),o=d["g"]();o.moveTo(t[0],t[1]),o.bezierCurveTo(n,t[1],n,e[1],e[0],e[1]),r.append("path").attr("d",o.toString()).attr("stroke","black").style("fill","none").style("stroke-width","1").style("stroke-dasharray","5 5")},initSvg:function(){var t=this;d["l"]("#forceGraph").selectAll("*").remove();var e=d["l"]("#forceGraph").append("svg").attr("width","100%").attr("height","100%").attr("transform","rotate(-45)");this.inteline=e.append("line").attr("id","inteline").attr("stroke","black").style("fill","none").style("stroke-width","3px").attr("marker-end","url(#arrow)").style("display","none"),e.on("mousemove",(function(t){d["l"]("#inteline").attr("x2",t.offsetX).attr("y2",t.offsetY)})),e.on("contextmenu",(function(e){e.preventDefault(),console.log("right",e),t.lineFlag?(d["l"]("#inteline").attr("x1",e.offsetX).attr("y1",e.offsetY).style("display","inline"),t.lineFlag=!t.lineFlag):(d["l"]("#inteline").style("display","none"),t.lineFlag=!t.lineFlag)}));var n=e.append("g").attr("transform","translate(50,0)");this.graph=n,this.svg=e,this.zoomed=function(t){var e=t.transform;n.attr("transform","translate(".concat(e.x,",").concat(e.y,")scale(").concat(e.k,")"))},this.zoom=d["n"]().scaleExtent([.1,10]).on("zoom",this.zoomed),e.call(this.zoom),this.drawGraph=n,this.zoom.translateTo(this.svg,-1200,-1400),this.zoom.scaleTo(this.svg,.47)},drawForceGraphd3:function(){var t=this,e=this.drawGraph,n=this.$store.state,r=n.demographicCol,o=n.coreProblemCol,a=n.questionTypeList,s=d["k"]().range([0,this.littleRectLength]).domain([.05,0]),i=d["k"]().range(["white","rgb(224,240,255)","#00A5FF","#0099FF"]).domain([0,2,35,40]),c=d["k"]().range(["white",r]).domain([this.$store.state.peopleNumber/2,2*this.$store.state.peopleNumber/3]),l=d["k"]().range(["white",o]).domain([this.$store.state.peopleNumber/2,2*this.$store.state.peopleNumber/3]),u=[c,i,l],p=this.$store.state.CHIGroup;p.forEach((function(n,r){if(!(n.length<=1)){t.matrixContent.push(n);var o=n.map((function(e){return t.NODE[e[0]]})),i=d["j"]().range([0,o.length*t.littleRectLength]).domain(o),c=d["j"]().range([o.length*t.littleRectLength,0]).domain(o),l=e.append("g");l.attr("id","".concat(r,"graph")),t.matrixList.push({index:r,graph:l}),l.append("g").classed("axisLeft",!0).call(d["c"](c)),l.append("g").classed("axisBottom",!0).attr("transform","translate(0,".concat(o.length*t.littleRectLength,")")).call(d["b"](i)),l.append("g").classed("axisTop",!0).call(d["e"](i)),l.append("g").classed("axisRight",!0).attr("transform","translate(".concat(o.length*t.littleRectLength,",0)")).call(d["d"](c));var p=l.append("g");console.log("before blue loop",n);for(var h=function(e){for(var r=0;r<n.length;r+=1){var o=n[e][0],l=n[r][0],d=void 0,h=void 0,f=0;e<r||0===t.CHIBACK.length?(f=t.$store.state.nodesConnections[Math.min(o,l)][Math.max(o,l)],d=s(t.$store.state.CHI[o][l])):e>r&&(f=8*t.$store.state.nodesConnectionsBACK[Math.min(o,l)][Math.max(o,l)],d=Math.max(0,s(t.$store.state.CHIBACK[o][l]/15))),o===l&&(d=0),(16===o&&10===l||10===o&&16===l)&&(f=2.76),(16===o&&15===l||15===o&&16===l)&&(f=7.61),f=Math.pow(f,t.val1/40),h=u[a[o]](f),h=u[1](f),p.append("rect").attr("x",i(t.NODE[o])+(t.littleRectLength-d)/2+2).attr("y",c(t.NODE[l])+(t.littleRectLength-d)/2).attr("width",d).attr("height",d).style("fill",h).on("click",(function(){t.$store.dispatch("selectNodeinGraph",n[e][0])}))}},f=0;f<n.length;f+=1)h(f)}})),this.text=d["m"](".tick>text"),this.text.on("mouseup",(function(){t.svg.call(t.zoom)})).on("mousemove",(function(t,e){d["l"]("#tooltip").style("left","".concat(t.clientX+10,"px")).style("top","".concat(t.clientY+10,"px")).style("z-index",20).style("display","inline").text(C(v(e)))})).on("mouseleave",(function(){d["l"]("#tooltip").style("display","none")})),console.log("tick!!!!!!!!!!!!!",this.text)},dataProcessing:function(){var t=this.$store.state,e=t.NODE,n=t.CHIGroup;this.CHIGroup=n,this.NODE=e;var r=[],o=[];e.forEach((function(t){o.push({name:t,value:1e3,itemStyle:{color:"#99CCFF"},symbolSize:50})})),n.forEach((function(t){for(var e=0;e<t.length-1;e+=1)r.push({source:t[e][0],target:t[e+1][0],value:10,lineStyle:{color:"#000"}});r.push({source:t[t.length-1][0],target:t[0][0],value:10,lineStyle:{color:"#000"}})})),this.nodes=o,this.links=r},setMatrixPosition:function(){var t=this,e=[[1,2],[3,4]],n=this.matrixTranslate;console.log(e,n,this.matrixList,"matrixTranslate"),this.matrixList.forEach((function(e,r){e.graph.attr("transform","translate(".concat(n[r][0],",").concat(n[r][1],")")).on("mouseup",(function(){console.log(r,"up"),t.svg.call(t.zoom),t.changeGroup(t.selectedQuestion,r)}))}))}}},At=bt,wt=(n("8e60"),Object(T["a"])(At,Ct,xt,!1,null,null,null)),Et=wt.exports,Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100%"}},[n("CardTitile",{attrs:{name:"Respondent"}},[t._v(" "+t._s(""+t.peopleIndexConstraints)+" ")]),n("div",{attrs:{id:"arcDiagram"}},[n("svg",{attrs:{id:"arcSvg"}})])],1)},Nt=[],$t={name:"arc",components:{CardTitile:q},data:function(){return{littleR:100,bigR:150,center:{x:200,y:200},littlePadding:.03,bigPadding:.3,CurvePerPeople:0,radiusPerPeople:.15,peopleOptionList:[[200,[1,1]],[100,[1,1]]],showNameThreshold:.5}},computed:{peopleIndexConstraints:function(){var t=this.$store.state.peopleIndexConstraints;return"undefined"===typeof t[1]?"ALL":"who answered '".concat(t[1],"' in Q").concat(t[0])},selectedHyperEdge:function(){return this.$store.state.selectedHyperEdge},questionOption:function(){return this.$store.state.questionOption},selectedNode:function(){return this.$store.state.selectedNode}},watch:{selectedNode:function(t){var e=this,n=[t];this.hyperEdgeOption=[A(t).slice(0,4)],this.hyperEdgeOptionNum=[w(t).slice(0,4)],d["l"]("#arcCurve").selectAll("*").remove(),d["l"]("#circleSvg").selectAll("*").remove(),d["l"]("#nameLayer").selectAll("*").remove(),this.curveList=this.solveCurve(n.map((function(t){return w(t)}))),this.curveNameList=n.map((function(t){return A(t)})),this.curveList.forEach((function(t,r){e.nameLayer.append("text").text(C(n[r])).attr("x",(e.bigR+e.littleR)*Math.sin((t[0][0]+t[t.length-1][1])/2)).attr("y",(e.bigR+e.littleR/3)*Math.cos((t[0][0]+t[t.length-1][1])/2)),t.forEach((function(t,o){var a=e.curveNameList[r][o];d["l"]("#arcCurve").append("path").on("mousemove",(function(t){d["l"]("#tooltip").style("left","".concat(t.clientX+10,"px")).style("top","".concat(t.clientY+10,"px")).style("z-index",20).style("display","inline").text(a)})).on("mouseleave",(function(){d["l"]("#tooltip").style("display","none")})).attr("d",e.solvePath(t[0],t[1],a)).attr("fill",e.$store.state.problemColArr[e.$store.state.questionTypeList[n[r]]]).style("cursor","pointer").on("click",(function(){console.log("clickselectNode",n[r]),e.dataRequestContraints=[n[r],a],e.$store.dispatch("dataRequestContraints",e.dataRequestContraints)}))}))}))},questionOption:function(){var t=this;this.hyperEdgeOption=this.$store.state.questionOption,this.hyperEdgeOptionNum=this.$store.state.questionOptionNum,d["l"]("#arcCurve").selectAll("*").remove(),d["l"]("#circleSvg").selectAll("*").remove(),d["l"]("#nameLayer").selectAll("*").remove(),this.curveList=this.solveCurve(this.selectedHyperEdge.map((function(t){return w(t)}))),this.curveNameList=this.selectedHyperEdge.map((function(t){return A(t)})),this.curveList.forEach((function(e,n){t.nameLayer.append("foreignObject").attr("x",(t.bigR+t.littleR+10)*Math.sin((e[0][0]+e[e.length-1][1])/2)-70).attr("y",(t.bigR+t.littleR/3)*Math.cos((e[0][0]+e[e.length-1][1])/2)-40).attr("width","150").attr("height","100").append("xhtml:div").attr("xmlns","http://www.w3.org/1999/xhtml").attr("class","longtextArc").text("".concat(y(t.selectedHyperEdge[n]),":").concat(C(t.selectedHyperEdge[n]))),e.forEach((function(e,r){var o="";o=t.curveNameList[n][r],d["l"]("#arcCurve").append("path").attr("d",t.solvePath(e[0],e[1],o)).attr("fill",t.$store.state.problemColArr[t.$store.state.questionTypeList[t.selectedHyperEdge[n]]]).style("cursor","pointer").on("mousemove",(function(t){d["l"]("#tooltip").style("left","".concat(t.clientX+10,"px")).style("top","".concat(t.clientY+10,"px")).style("z-index",20).style("display","inline").text(o)})).on("mouseleave",(function(){d["l"]("#tooltip").style("display","none")})).on("click",(function(){console.log("click",t.selectedHyperEdge[n]),t.dataRequestContraints=[t.selectedHyperEdge[n],o],t.$store.dispatch("dataRequestContraints",t.dataRequestContraints)}))}))})),console.log(this.hyperEdgeOption,this.hyperEdgeOptionNum,"this.hyper"),this.hyperEdgeOption.forEach((function(e,n){console.log("optionArr",e,t.selectedHyperEdge);var r=e.map((function(e,n){return E(e,t.selectedHyperEdge[n])}));console.log("!~~~~",t.hyperEdgeOptionNum[n],r,t.colorArr[n]),t.addPeople(t.hyperEdgeOptionNum[n],r,t.colorArr[n])}))}},mounted:function(){this.colorArr=this.$store.state.colorArr;var t=d["l"]("#arcSvg").append("g").attr("transform","scale(0.8)translate(50,+20)").append("g").attr("id","arcGraph").attr("transform","translate(300,200)").append("g").attr("id","arcCurve");this.nameLayer=d["l"]("#arcGraph").append("g").attr("id","nameLayer"),d["l"]("#arcGraph").insert("g","#arcCurve").attr("id","circleSvg"),console.log(t)},methods:{addPeople:function(t,e,n){var r=this;console.log(t,e,n,"people");var o=d["l"]("#circleSvg"),a=t*this.radiusPerPeople;e.forEach((function(e,a){console.log("curveList",r.curveList,r.curveList[a],e);var s=r.curveList[a][e][0],i=s+t*r.CurvePerPeople;console.log("endCurve",s,i),o.append("path").attr("d",d["a"]()({outerRadius:r.bigR,startAngle:Math.PI-i,endAngle:Math.PI-s,innerRadius:0})).attr("style","fill:rgba(".concat(n,",1)")),r.curveList[a][e][0]+=t*r.CurvePerPeople})),o.append("circle").attr("r",a).attr("cx",0).attr("cy",0).attr("fill","rgba(".concat(n,",1)"))},solveCurve:function(t){var e=this,n=t.length*this.bigPadding;1===t.length&&(n=this.littlePadding);var r=0;t.forEach((function(t){n+=(t.length-1)*e.littlePadding,t.forEach((function(t){r+=t}))})),console.log("sumpeople",r,t);var o=2*Math.PI-n;this.CurvePerPeople=o/r;var a=[];a=t.map((function(t){return t.map((function(t){return t*o/r}))}));for(var s=[],i=0,c=0;c<a.length;c+=1){for(var l=[],u=0;u<a[c].length;u+=1)l.push([i,i+a[c][u]]),i+=this.littlePadding+a[c][u];s.push(l),i+=this.bigPadding-this.littlePadding}return s},solvePath:function(t,e,n){var r=this.littleR,o=this.bigR;console.log(n);var a=[r*Math.sin(t),r*Math.cos(t)],s=[o*Math.sin(t),o*Math.cos(t)],i=[r*Math.sin(e),r*Math.cos(e)],c=[o*Math.sin(e),o*Math.cos(e)],l=e-t>Math.PI?1:0,u="M ".concat(a[0]," ").concat(a[1]," A ").concat(this.littleR," ").concat(this.littleR," 0 ").concat(l," 0 ").concat(i[0]," ").concat(i[1]);return u+=" L ".concat(c[0]," ").concat(c[1]," A ").concat(this.bigR," ").concat(this.bigR," 0 ").concat(l," 1 ").concat(s[0]," ").concat(s[1]," z"),u}}},kt=$t,Lt=(n("99c3"),n("6ea3"),Object(T["a"])(kt,Ot,Nt,!1,null,"95f9af74",null)),Tt=Lt.exports,It={name:"App",data:function(){return{input2:null,input3:null,bodyCardStyle:"height:100%;padding:0px",flag:!0,start:[-100,-100],end:[-100,-100]}},computed:{fullScreenLoading:function(){return console.log("finish loading"),this.$store.state.fullScreenLoading}},mounted:function(){this.$store.commit("updateLoading",!0),this.$store.dispatch("dataRequest",{question:[],people:[]})},components:{Matrix:tt,Causal:yt,Graph:Et,Arc:Tt,Question:G},methods:{rightClick:function(){console.log(this.val1),this.flag?console.log(this.line):this.flag=!this.flag},delNode:function(){var t=v(this.input2);this.$store.commit("delNode",t)},addNode:function(){var t=v(this.input2);this.$store.commit("addNode",t)}}},qt=It,St=(n("034f"),Object(T["a"])(qt,i,c,!1,null,null,null)),Ht=St.exports;n("0fae");r["default"].config.productionTip=!1,r["default"].use(a.a),r["default"].prototype.$echarts=s,new r["default"]({render:function(t){return t(Ht)},store:m}).$mount("#app")},5830:function(t,e,n){},"6d64":function(t,e,n){},"6ea3":function(t,e,n){"use strict";n("a381")},"771d":function(t,e,n){"use strict";n("3334")},"85ec":function(t,e,n){},"8e60":function(t,e,n){"use strict";n("2811")},"94b2":function(t,e,n){},"99c3":function(t,e,n){"use strict";n("6d64")},a381:function(t,e,n){},a8ed:function(t,e,n){},d9a2:function(t,e,n){}});
//# sourceMappingURL=app.6542648a.js.map